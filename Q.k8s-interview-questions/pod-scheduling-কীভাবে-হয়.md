

### Pod scheduling ржХрзАржнрж╛ржмрзЗ рж╣ржпрж╝?

#### ЁЯУШ ржПржЗ рж▓рзЗржЦрж╛ржпрж╝ ржпрж╛ ржерж╛ржХржЫрзЗ:
- Pod ржХрзА ржПржмржВ ржХрзЗржи ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝
- `db.yml` ржлрж╛ржЗрж▓ ржмрзНржпрж╛ржЦрзНржпрж╛
- Kubernetes-ржП Pod Scheduling-ржПрж░ ржкрзНрж░ржзрж╛ржи component ржЧрзБрж▓рзЛ
- Step-by-step scheduling ржкрзНрж░рж╕рзЗрж╕

#### ЁЯз▒ Kubernetes Pod & db.yml Explained

Kubernetes-ржП container рж╕рж░рж╛рж╕рж░рж┐ ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛ржпрж╝ ржирж╛ред ржЖржорж░рж╛ container-ржХрзЗ **Pod** ржПрж░ ржнрзЗрждрж░рзЗ ржЪрж╛рж▓рж╛ржЗред Pod рж╣рж▓рзЛ Kubernetes-ржПрж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржЫрзЛржЯ deployable unitред

ржирж┐ржЪрзЗ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг Pod definition (`db.yml`) ржжрзЗржУржпрж╝рж╛ рж╣рж▓рзЛ:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: db
  labels:
    type: db
    vendor: MongoLabs
spec:
  containers:
  - name: db
    image: mongo:3.3
    command: ["mongod"]
    args: ["--rest", "--httpinterface"]
```

##### ЁЯУД `db.yml` ржмрзНржпрж╛ржЦрзНржпрж╛

| рж▓рж╛ржЗржи | ржмрзНржпрж╛ржЦрзНржпрж╛ |
|------|----------|
| 1тАУ2  | `apiVersion` ржУ `kind`тАФржПржЧрзБрж▓рзЛ Kubernetes-ржХрзЗ ржЬрж╛ржирж╛ржпрж╝ ржЖржорж░рж╛ ржХрзЛржи ржзрж░ржирзЗрж░ resource рждрзИрж░рж┐ ржХрж░рждрзЗ ржЪрж╛ржЗ (ржПржЦрж╛ржирзЗ Pod) ржПржмржВ ржХрзЛржи API version ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмредред |
| 3тАУ7  | `metadata` ржЕржВрж╢рзЗ Pod-ржПрж░ ржирж╛ржо ржПржмржВ ржХрж┐ржЫрзБ label рж░ржпрж╝рзЗржЫрзЗред ржПржЧрзБрж▓рзЛ ржкрж░ржмрж░рзНрждрзАрждрзЗ selectors ржмрж╛ controllers-ржП ржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржпред |
| 8    | `spec`-ржП container рж╕ржВржХрзНрж░рж╛ржирзНржд рждржерзНржп ржерж╛ржХрзЗред |
| 9тАУ11 | container-ржПрж░ ржирж╛ржо `db`, image рж╣рж┐рж╕рзЗржмрзЗ `mongo:3.3` ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝рзЗржЫрзЗред |
| 12   | container ржЪрж╛рж▓рзБ рж╣рж▓рзЗ `mongod` ржХржорж╛ржирзНржб ржЪрж▓ржмрзЗред |
| 13   | ржжрзБржЯрж┐ argument: `--rest`, `--httpinterface` ржЪрж╛рж▓рзБ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред |

---

#### тЪЩя╕П Pod Scheduling-ржП ржЬржбрж╝рж┐ржд ржкрзНрж░ржзрж╛ржи рзйржЯрж┐ Component

##### 1я╕ПтГг API Server
- ржПржЯрж┐ ржкрзБрж░рзЛ cluster-ржПрж░ ржорж╕рзНрждрж┐рж╖рзНржХред
- рж╕ржм communication, authentication, ржПржмржВ object management ржПржЦрж╛ржи ржжрж┐ржпрж╝рзЗ рж╣ржпрж╝ред

##### 2я╕ПтГг Scheduler
- ржпрзЗрж╕ржм Pod ржПржЦржирзЛ ржХрзЛржирзЛ node-ржП assign рж╣ржпрж╝ржирж┐ (unassigned), рждрж╛ржжрзЗрж░ detect ржХрж░рзЗред
- ржЙржкржпрзБржХрзНржд node ржЦрзБржБржЬрзЗ ржирж┐ржпрж╝рзЗ, рж╕рзЗржЗ node-ржП Pod assign ржХрж░рзЗ ржжрзЗржпрж╝ред

##### 3я╕ПтГг Kubelet
- ржкрзНрж░рждрж┐ржЯрж┐ worker node-ржП ржЪрж╛рж▓рж┐ржд рж╣ржпрж╝ред
- Scheduler ржпрзЗржЗ node-ржП Pod assign ржХрж░рзЗ, рж╕рзЗржЗ node-ржПрж░ Kubelet container рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ ржЪрж╛рж▓рж╛ржпрж╝ред

---

#### ЁЯФБ Step-by-Step Pod Scheduling Flow

1. **Pod Creation:**
   - `kubectl create -f db.yml` ржжрж┐рж▓рзЗ client API server-ржП Pod рждрзИрж░рж┐рж░ request ржкрж╛ржарж╛ржпрж╝ред
2. **Detection by Scheduler:**
   - API server ржжрзЗржЦрждрзЗ ржкрж╛ржпрж╝ ржПржХржЯрж┐ unassigned Pod ржПрж╕рзЗржЫрзЗред
3. **Node Assignment:**
   - Scheduler resource-based decision ржирж┐ржпрж╝рзЗ ржПржХржЯрж┐ node ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзЗ Pod assign ржХрж░рзЗред
4. **Kubelet Trigger:**
   - Assigned node-ржПрж░ Kubelet API server ржерзЗржХрзЗ ржЬрж╛ржирждрзЗ ржкрж╛рж░рзЗ рждрж╛рж░ node-ржП ржирждрзБржи Pod рж░рж╛ржи рж╣ржмрзЗред
5. **Container Launch:**
   - Kubelet, container runtime (ржпрзЗржоржи Docker) ржХрзЗ Pod ржЕржирзБржпрж╛ржпрж╝рзА container ржЪрж╛рж▓рж╛рждрзЗ ржмрж▓рзЗред
6. **Status Reporting:**
   - Pod рж╕ржлрж▓ржнрж╛ржмрзЗ ржЪрж╛рж▓рзБ рж╣рж▓рзЗ, Kubelet API server-ржП ржЬрж╛ржирж┐ржпрж╝рзЗ ржжрзЗржпрж╝ред

---

